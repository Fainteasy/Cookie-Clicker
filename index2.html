<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pikliker</title>
  <!--JS-->
  <script src="script.js"></script>
  <!--SCRIPT TAILWIND + FONTAWSOME + GOOGLE FONTS-->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
  <script src="https://kit.fontawesome.com/d6a733dcf4.js" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
</head>
<body>
    <div id="gameplay-interface" class="relative bg-cover w-screen h-screen bg bg-[url(img/stadium.png)]">
        <div class="flex justify-center lg:justify-start lg:ml-4">
        <div  class="flex justify-center  gap-4 absolute top-2 p-1 w-[100%] md:w-[33%]    mt-4 bg-stone-500 rounded-xl w-1/3 text-center">
            <div class="flex justify-evenly items-center text-lg" id="score-wrapper"><span>Wallet :</span><strong id="score"></strong></div>
                <img src="img/PokeCoin.png" alt="">
            </div>
        </div>
            <div id="pokeball" class="hidden absolute z-50 top-2"><input src="img/pokeball.png" type="image" name="pokeball" id="pokeball"></div>
            <div id="pokecoin" class="hidden absolute z-40">
                <input type="image" src="img/PokeCoin.png" name="pichu" class="" id="counter"/>
            </div>
            <div id="pichu" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                <input type="image" src="img/pichu.png" name="pichu" class="transition-transform transform hover:scale-90" id="pichu"/></div>
            <div id="pikachu" class="hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                <input type="image" src="img/pikachu.png" name="pikachu" class="transition-transform transform hover:scale-90" id="pikachu"/>
            </div>
            <div id="Raichu" class="hidden absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                <input type="image" src="img/Raichu.png" name="raichu" class="transition-transform transform hover:scale-90" id="raichu"/>
            </div>
            <div id="gameplay-menu" class="flex rounded-xl bg-gray-400 opacity-50 absolute w-[100%] h-[30%] bottom-0 gap-5 justify-center p-4 lg:w-[33%] lg:right-0 lg:mr-4">
            <div class="flex flex-col w-[50%] gap-4">
                <div  class="bg-black rounded-xl w-[100%] h-[50%] "><button id="attack" class="flex justify-center w-[100%] h-[100%] border-2 border-black rounded-xl items-center bg-gray-100 px-4  hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-600 focus:ring-opacity-50 ">
                    <p class="text-xl  ">Attaque</p>
                </button>
                </div>
                <div id="shop" class="bg-black rounded-xl w-[100%] h-[50%]"> Shop</div>
            </div>
            <div class="flex flex-col w-[50%] gap-4">
                <div id="guide" class="bg-black rounded-xl w-[100%] h-[50%]">Guide</div>
                <div id="reset" class="bg-black rounded-xl w-[100%] h-[50%]">Reset</div>
            </div>
            </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
         const pokeballElement = document.getElementById('pokeball');
         const gameplayWrapper = document.getElementById('gameplay-interface');
         let animationFrameId = null;
         let clickPower = 1; // Assurez-vous d'initialiser clickPower en fonction de la logique de votre jeu.
     
         function movePokeball() {
             const topPosition = parseInt(pokeballElement.style.top) || 0;
             pokeballElement.style.top = (topPosition + 1) + 'px';
     
             const rect = gameplayWrapper.getBoundingClientRect();
     
             // Si la pokeball atteint le bas ou est cliquée, on arrête l'animation
             if (topPosition > (rect.bottom - rect.top) - pokeballElement.offsetHeight || pokeballElement.style.display === 'none') {
                 cancelAnimationFrame(animationFrameId);
                 pokeballElement.style.display = 'none';
                 schedulePokeball();
             } else {
                 animationFrameId = requestAnimationFrame(movePokeball);
             }
         }
     
         function spawnPokeball() {
             const rect = gameplayWrapper.getBoundingClientRect();
             const randomX = Math.floor(Math.random() * (rect.width - pokeballElement.clientWidth));
     
             pokeballElement.style.left = randomX + 'px';
             pokeballElement.style.top = '0px'; // Le point de départ est le haut de la div du gameplay
             pokeballElement.style.display = 'block';
     
             movePokeball();
         }
     
         function schedulePokeball() {
             const randomInterval = Math.random() * (1800 - 1200) + 1200; // 2-3 minutes
             setTimeout(spawnPokeball, randomInterval);
         }
     
         pokeballElement.addEventListener('click', function() {
             pokeballElement.style.display = 'none';
     
             // Logique pour augmenter temporairement clickPower
             const originalClickPower = clickPower;
             clickPower += 10;
     
             // Réinitialiser clickPower après 5 secondes
             setTimeout(function() {
                 clickPower = originalClickPower;
             }, 5000);
         });
     
         // Initialiser les positions pour éviter les erreurs de calcul
         pokeballElement.style.top = '0px';
         pokeballElement.style.left = '0px';
     
         schedulePokeball(); // Commencer le cycle d'apparition de la pokeball
     });
     
       </script>
</body>
</html>